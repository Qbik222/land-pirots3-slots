"use strict";

window.addEventListener('orientationchange', function () {
  window.location.reload();
});
var playBtn = document.querySelector('.play-btn'),
  overlay = document.querySelector('.land__overlay'),
  popup = document.querySelector('.popup'),
  overflow = document.querySelector('body'),
  wrapper = document.querySelector('.land'),
  winOuter = document.querySelector('.outer-col-win'),
  slotsWindow = document.querySelector(".window");

//slots
var icons = ['win1.png', 'win2.png', 'win3.png', 'win4.png', 'win5.png', 'win6.png', 'win7.png', 'win8.png', 'win9.png', 'win10.png', 'win11.png', 'win12.png', 'win13.png', 'win14.png', 'win15.png'];
var slots = document.querySelector('.slots');
var cols = document.querySelectorAll('.col');
for (var i in cols) {
  if (!cols.hasOwnProperty(i)) continue;
  var col = cols[i];
  var str = '';
  var firstThree = '';
  for (var x = 0; x < 30; x++) {
    var part = '<div class="icon-wrap"><img class="icon" src="img/slots/' + icons[Math.floor(Math.random() * icons.length)] + '"></div>';
    // var part = '<img class="icon" src="img/slots/'+icons[Math.floor(Math.random()*icons.length)]+'">';
    str += part;
    if (x < 3) firstThree += part;
  }
  col.innerHTML = str + firstThree;
}
(function startSlotsImg() {
  var startCol1 = ['win1.png', 'win12.png', 'win13.png'];
  var startCol2 = ['win7.png', 'win8.png', 'win10.png'];
  var startCol3 = ['win11.png', 'win14.png', 'win12.png'];
  var startCol4 = ['win5.png', 'win1.png', 'win2.png'];
  var startCol5 = ['win5.png', 'win6.png', 'win13.png'];
  var colsImg1 = Array.from(cols[0].querySelectorAll('img'));
  colsImg1[32].setAttribute('src', 'img/slots/' + startCol1[0]);
  colsImg1[31].setAttribute('src', 'img/slots/' + startCol1[1]);
  colsImg1[30].setAttribute('src', 'img/slots/' + startCol1[2]);
  var colsImg2 = Array.from(cols[1].querySelectorAll('img'));
  colsImg2[32].setAttribute('src', 'img/slots/' + startCol2[0]);
  colsImg2[31].setAttribute('src', 'img/slots/' + startCol2[1]);
  colsImg2[30].setAttribute('src', 'img/slots/' + startCol2[2]);
  var colsImg3 = Array.from(cols[2].querySelectorAll('img'));
  colsImg3[32].setAttribute('src', 'img/slots/' + startCol3[0]);
  colsImg3[31].setAttribute('src', 'img/slots/' + startCol3[1]);
  colsImg3[30].setAttribute('src', 'img/slots/' + startCol3[2]);
  var colsImg4 = Array.from(cols[3].querySelectorAll('img'));
  colsImg4[32].setAttribute('src', 'img/slots/' + startCol4[0]);
  colsImg4[31].setAttribute('src', 'img/slots/' + startCol4[1]);
  colsImg4[30].setAttribute('src', 'img/slots/' + startCol4[2]);
  var colsImg5 = Array.from(cols[4].querySelectorAll('img'));
  colsImg5[32].setAttribute('src', 'img/slots/' + startCol5[0]);
  colsImg5[31].setAttribute('src', 'img/slots/' + startCol5[1]);
  colsImg5[30].setAttribute('src', 'img/slots/' + startCol5[2]);
})();
var win1Col1 = ['win1.png', 'win5.png', 'win13.png'];
var win1Col2 = ['win7.png', 'win5.png', 'win10.png'];
var win1Col3 = ['win11.png', 'win5.png', 'win12.png'];
var win1Col4 = ['win11.png', 'win5.png', 'win2.png'];
var win1Col5 = ['win2.png', 'win5.png', 'win13.png'];
var colsImg1 = Array.from(cols[0].querySelectorAll('img'));
var colsImg2 = Array.from(cols[1].querySelectorAll('img'));
var colsImg3 = Array.from(cols[2].querySelectorAll('img'));
var colsImg4 = Array.from(cols[3].querySelectorAll('img'));
var colsImg5 = Array.from(cols[4].querySelectorAll('img'));
var tries = 0;
function spin() {
  //sounds

  slots.classList.toggle('spinning', true);
  //Фикс для Сафари, который решил глотать последние картинки при прокрутке
  if (tries === 0) {
    window.setTimeout(function () {
      var cols = document.querySelectorAll('.col');
      tries++;
      console.log(colsImg1[32]);
      colsImg1[32].setAttribute('src', 'img/slots/' + win1Col1[2]);
      colsImg1[31].setAttribute('src', 'img/slots/' + win1Col1[1]);
      colsImg1[30].setAttribute('src', 'img/slots/' + win1Col1[0]);
      colsImg1[0].setAttribute('src', 'img/slots/' + win1Col1[0]);
      colsImg1[1].setAttribute('src', 'img/slots/' + win1Col1[1]);
      colsImg1[2].setAttribute('src', 'img/slots/' + win1Col1[2]);
      colsImg2[32].setAttribute('src', 'img/slots/' + win1Col2[2]);
      colsImg2[31].setAttribute('src', 'img/slots/' + win1Col2[1]);
      colsImg2[30].setAttribute('src', 'img/slots/' + win1Col2[0]);
      colsImg2[0].setAttribute('src', 'img/slots/' + win1Col2[0]);
      colsImg2[1].setAttribute('src', 'img/slots/' + win1Col2[1]);
      colsImg2[2].setAttribute('src', 'img/slots/' + win1Col2[2]);
      colsImg3[32].setAttribute('src', 'img/slots/' + win1Col3[2]);
      colsImg3[31].setAttribute('src', 'img/slots/' + win1Col3[1]);
      colsImg3[30].setAttribute('src', 'img/slots/' + win1Col3[0]);
      colsImg3[0].setAttribute('src', 'img/slots/' + win1Col3[0]);
      colsImg3[1].setAttribute('src', 'img/slots/' + win1Col3[1]);
      colsImg3[2].setAttribute('src', 'img/slots/' + win1Col3[2]);
      colsImg4[32].setAttribute('src', 'img/slots/' + win1Col4[2]);
      colsImg4[31].setAttribute('src', 'img/slots/' + win1Col4[1]);
      colsImg4[30].setAttribute('src', 'img/slots/' + win1Col4[0]);
      colsImg4[0].setAttribute('src', 'img/slots/' + win1Col4[0]);
      colsImg4[1].setAttribute('src', 'img/slots/' + win1Col4[1]);
      colsImg4[2].setAttribute('src', 'img/slots/' + win1Col4[2]);
      colsImg5[32].setAttribute('src', 'img/slots/' + win1Col5[2]);
      colsImg5[31].setAttribute('src', 'img/slots/' + win1Col5[1]);
      colsImg5[30].setAttribute('src', 'img/slots/' + win1Col5[0]);
      colsImg5[0].setAttribute('src', 'img/slots/' + win1Col5[0]);
      colsImg5[1].setAttribute('src', 'img/slots/' + win1Col5[1]);
      colsImg5[2].setAttribute('src', 'img/slots/' + win1Col5[2]);
    }, 1500);
  }
  window.setTimeout(function () {
    slots.classList.toggle('spinning', false);
    if (tries === 1) {
      slotsWindow.classList.add("afterSpin");
      colsImg1[31].parentElement.classList.add('_winAnim');
      colsImg2[31].parentElement.classList.add('_winAnim');
      colsImg3[31].parentElement.classList.add('_winAnim');
      colsImg4[31].parentElement.classList.add('_winAnim');
      colsImg5[31].parentElement.classList.add('_winAnim');
      winOuter.classList.add('_winOne');
    }
  }, 3500);
}
var triesCounter = 0;
playBtn.addEventListener('click', function () {
  if (triesCounter === 0) {
    runFirstRotation();
  }
});
function runFirstRotation() {
  playBtn.classList.remove('pulse-btn');
  playBtn.style.cursor = 'default';
  wrapper.style.pointerEvents = 'none';
  spin();
  setTimeout(function () {
    doAfterFirstRotation();
    setTimeout(function () {
      popup.querySelector(".popup__pers-bulb").classList.add("bulb-fadeIn");
    }, 300);
  }, 4000);
  triesCounter++;
}
function displayPopup(popup) {
  overlay.classList.remove('_opacity-overlay');
  popup.classList.remove('hide');
}
function doAfterFirstRotation() {
  displayPopup(popup);
  // wrapper.style.pointerEvents = 'auto'
  overflow.style.overflow = 'hidden';
  document.querySelector(".all-link").style.display = "block";
  wrapper.style.pointerEvents = "none";
}
cols.forEach(function (item) {
  if (/iPhone|iPad|iPod/i.test(navigator.userAgent)) {
    // код для мобильных устройств
    item.classList.add('_ios');
  } else {
    // код для обычных устройств
    item.classList.remove('_ios');
  }
});

// TDS script

(function () {
  var url = new URL(window.location.href);
  var params = ['l', 'utm_source', 'utm_medium', 'utm_campaign', 'utm_term', 'utm_content', 'param1', 'param2', 'param3', 'param4', 'creative_type', 'creative_id'];
  var linkParams = ['affid', 'cpaid']; // ищем в url redirectUrl в url:

  if (url.searchParams.has('redirectUrl')) {
    var redirectUrl = new URL(url.searchParams.get('redirectUrl'));
    if (redirectUrl.href.match(/\//g).length === 4 && redirectUrl.searchParams.get('l')) {
      //если ссылка в ссылка redirectUrl корректная
      localStorage.setItem('redirectUrl', redirectUrl.href); // указываем точкой входа домен с протоколом из redirectUrl
    }
  }

  params.forEach(function (param) {
    if (url.searchParams.has(param)) localStorage.setItem(param, url.searchParams.get(param));
  });
  linkParams.forEach(function (linkParam) {
    if (url.searchParams.has(linkParam)) localStorage.setItem(linkParam, url.searchParams.get(linkParam));
  });
  window.addEventListener('click', function (e) {
    var link,
      parent = e.target.closest('a');
    if (parent.getAttribute('href') !== 'https://tds.favbet.partners') {
      return;
    }
    if (parent) {
      e.preventDefault();
      var affid = localStorage.getItem('affid');
      var cpaid = localStorage.getItem('cpaid');
      if (localStorage.getItem("redirectUrl")) {
        link = new URL(localStorage.getItem("redirectUrl"));
      } else {
        link = new URL(parent.href);
        if (affid && cpaid) {
          link.pathname = '/' + affid + '/' + cpaid;
        }
      }
      params.forEach(function (param) {
        if (url.searchParams.has(param)) {
          link.searchParams.set(param, localStorage.getItem(param));
        }
      });
      document.location.href = link;
    }
  });
})();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsImxvY2F0aW9uIiwicmVsb2FkIiwicGxheUJ0biIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIm92ZXJsYXkiLCJwb3B1cCIsIm92ZXJmbG93Iiwid3JhcHBlciIsIndpbk91dGVyIiwic2xvdHNXaW5kb3ciLCJpY29ucyIsInNsb3RzIiwiY29scyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpIiwiaGFzT3duUHJvcGVydHkiLCJjb2wiLCJzdHIiLCJmaXJzdFRocmVlIiwieCIsInBhcnQiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJsZW5ndGgiLCJpbm5lckhUTUwiLCJzdGFydFNsb3RzSW1nIiwic3RhcnRDb2wxIiwic3RhcnRDb2wyIiwic3RhcnRDb2wzIiwic3RhcnRDb2w0Iiwic3RhcnRDb2w1IiwiY29sc0ltZzEiLCJBcnJheSIsImZyb20iLCJzZXRBdHRyaWJ1dGUiLCJjb2xzSW1nMiIsImNvbHNJbWczIiwiY29sc0ltZzQiLCJjb2xzSW1nNSIsIndpbjFDb2wxIiwid2luMUNvbDIiLCJ3aW4xQ29sMyIsIndpbjFDb2w0Iiwid2luMUNvbDUiLCJ0cmllcyIsInNwaW4iLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJzZXRUaW1lb3V0IiwiY29uc29sZSIsImxvZyIsImFkZCIsInBhcmVudEVsZW1lbnQiLCJ0cmllc0NvdW50ZXIiLCJydW5GaXJzdFJvdGF0aW9uIiwicmVtb3ZlIiwic3R5bGUiLCJjdXJzb3IiLCJwb2ludGVyRXZlbnRzIiwiZG9BZnRlckZpcnN0Um90YXRpb24iLCJkaXNwbGF5UG9wdXAiLCJkaXNwbGF5IiwiZm9yRWFjaCIsIml0ZW0iLCJ0ZXN0IiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwidXJsIiwiVVJMIiwiaHJlZiIsInBhcmFtcyIsImxpbmtQYXJhbXMiLCJzZWFyY2hQYXJhbXMiLCJoYXMiLCJyZWRpcmVjdFVybCIsImdldCIsIm1hdGNoIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsInBhcmFtIiwibGlua1BhcmFtIiwiZSIsImxpbmsiLCJwYXJlbnQiLCJ0YXJnZXQiLCJjbG9zZXN0IiwiZ2V0QXR0cmlidXRlIiwicHJldmVudERlZmF1bHQiLCJhZmZpZCIsImdldEl0ZW0iLCJjcGFpZCIsInBhdGhuYW1lIiwic2V0Il0sIm1hcHBpbmdzIjoiOztBQUFBQSxNQUFNLENBQUNDLGdCQUFnQixDQUFDLG1CQUFtQixFQUFFLFlBQU07RUFDL0NELE1BQU0sQ0FBQ0UsUUFBUSxDQUFDQyxNQUFNLEVBQUU7QUFDNUIsQ0FBQyxDQUFDO0FBRUYsSUFBTUMsT0FBTyxHQUFHQyxRQUFRLENBQUNDLGFBQWEsQ0FBQyxXQUFXLENBQUM7RUFDL0NDLE9BQU8sR0FBR0YsUUFBUSxDQUFDQyxhQUFhLENBQUMsZ0JBQWdCLENBQUM7RUFDbERFLEtBQUssR0FBR0gsUUFBUSxDQUFDQyxhQUFhLENBQUMsUUFBUSxDQUFDO0VBQ3hDRyxRQUFRLEdBQUdKLFFBQVEsQ0FBQ0MsYUFBYSxDQUFDLE1BQU0sQ0FBQztFQUN6Q0ksT0FBTyxHQUFHTCxRQUFRLENBQUNDLGFBQWEsQ0FBQyxPQUFPLENBQUM7RUFDekNLLFFBQVEsR0FBR04sUUFBUSxDQUFDQyxhQUFhLENBQUMsZ0JBQWdCLENBQUM7RUFDbkRNLFdBQVcsR0FBR1AsUUFBUSxDQUFDQyxhQUFhLENBQUMsU0FBUyxDQUFDOztBQUduRDtBQUNBLElBQUlPLEtBQUssR0FBRyxDQUNSLFVBQVUsRUFBQyxVQUFVLEVBQUMsVUFBVSxFQUFDLFVBQVUsRUFBQyxVQUFVLEVBQUMsVUFBVSxFQUFDLFVBQVUsRUFBQyxVQUFVLEVBQUMsVUFBVSxFQUNsRyxXQUFXLEVBQUMsV0FBVyxFQUFDLFdBQVcsRUFBQyxXQUFXLEVBQUMsV0FBVyxFQUFDLFdBQVcsQ0FDMUU7QUFFRCxJQUFJQyxLQUFLLEdBQUdULFFBQVEsQ0FBQ0MsYUFBYSxDQUFDLFFBQVEsQ0FBQztBQUM1QyxJQUFJUyxJQUFJLEdBQUdWLFFBQVEsQ0FBQ1cs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QUFDLENBQUMsQ0FBQyxDQUFDO01BQzNETCxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUNELFlBQVksQ0FBQyxLQUFLLEVBQUUsWUFBWSxHQUFFTSxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7TUFDM0RMLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQ0QsWUFBWSxDQUFDLEtBQUssRUFBRSxZQUFZLEdBQUVNLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztNQUMxREwsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDRCxZQUFZLENBQUMsS0FBSyxFQUFFLFlBQVksR0FBRU0sUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO01BQzFETCxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUNELFlBQVksQ0FBQyxLQUFLLEVBQUUsWUFBWSxHQUFFTSxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7TUFFMURKLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQ0YsWUFBWSxDQUFDLEtBQUssRUFBRSxZQUFZLEdBQUVPLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztNQUMzREwsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDRixZQUFZLENBQUMsS0FBSyxFQUFFLFlBQVksR0FBRU8sUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO01BQzNETCxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUNGLFlBQVksQ0FBQyxLQUFLLEVBQUUsWUFBWSxHQUFFTyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7TUFDM0RMLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQ0YsWUFBWSxDQUFDLEtBQUssRUFBRSxZQUFZLEdBQUVPLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztNQUMxREwsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDRixZQUFZLENBQUMsS0FBSyxFQUFFLFlBQVksR0FBRU8sUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO01BQzFETCxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUNGLFlBQVksQ0FBQyxLQUFLLEVBQUUsWUFBWSxHQUFFTyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7TUFFMURKLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQ0gsWUFBWSxDQUFDLEtBQUssRUFBRSxZQUFZLEdBQUVRLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztNQUMzREwsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDSCxZQUFZLENBQUMsS0FBSyxFQUFFLFlBQVksR0FBRVEsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO01BQzNETCxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUNILFlBQVksQ0FBQyxLQUFLLEVBQUUsWUFBWSxHQUFFUSxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7TUFDM0RMLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQ0gsWUFBWSxDQUFDLEtBQUssRUFBRSxZQUFZLEdBQUVRLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztNQUMxREwsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDSCxZQUFZLENBQUMsS0FBSyxFQUFFLFlBQVksR0FBRVEsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO01BQzFETCxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUNILFlBQVksQ0FBQyxLQUFLLEVBQUUsWUFBWSxHQUFFUSxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7TUFFMURKLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQ0osWUFBWSxDQUFDLEtBQUssRUFBRSxZQUFZLEdBQUVTLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztNQUMzREwsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDSixZQUFZLENBQUMsS0FBSyxFQUFFLFlBQVksR0FBRVMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO01BQzNETCxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUNKLFlBQVksQ0FBQyxLQUFLLEVBQUUsWUFBWSxHQUFFUyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7TUFDM0RMLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQ0osWUFBWSxDQUFDLEtBQUssRUFBRSxZQUFZLEdBQUVTLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztN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QUNlLE1BQU0sQ0FBQ2QsSUFBSSxDQUFDO1FBQzNCLElBQUltQixLQUFLLElBQUlFLEtBQUssRUFBRTtVQUNoQlIsSUFBSSxDQUFDUyxRQUFRLEdBQUcsR0FBRyxHQUFHSCxLQUFLLEdBQUcsR0FBRyxHQUFHRSxLQUFLO1FBQzdDO01BQ0o7TUFDQXBCLE1BQU0sQ0FBQ1IsT0FBTyxDQUFDLFVBQVVpQixLQUFLLEVBQUU7UUFDNUIsSUFBSVosR0FBRyxDQUFDSyxZQUFZLENBQUNDLEdBQUcsQ0FBQ00sS0FBSyxDQUFDLEVBQUU7VUFDN0JHLElBQUksQ0FBQ1YsWUFBWSxDQUFDb0IsR0FBRyxDQUFDYixLQUFLLEVBQUVGLFlBQVksQ0FBQ1ksT0FBTyxDQUFDVixLQUFLLENBQUMsQ0FBQztRQUM3RDtNQUNKLENBQUMsQ0FBQztNQUNGOUUsUUFBUSxDQUFDSCxRQUFRLENBQUN1RSxJQUFJLEdBQUdhLElBQUk7SUFDakM7RUFDSixDQUFDLENBQUM7QUFDTixDQUFDLEdBQUciLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdvcmllbnRhdGlvbmNoYW5nZScsICgpID0+IHtcbiAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcbn0pO1xuXG5jb25zdCBwbGF5QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBsYXktYnRuJyksXG4gICAgb3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sYW5kX19vdmVybGF5JyksXG4gICAgcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXAnKSxcbiAgICBvdmVyZmxvdyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKSxcbiAgICB3cmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxhbmQnKSxcbiAgICB3aW5PdXRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vdXRlci1jb2wtd2luJyksXG4gICAgc2xvdHNXaW5kb3cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLndpbmRvd1wiKVxuXG5cbi8vc2xvdHNcbnZhciBpY29ucyA9IFtcbiAgICAnd2luMS5wbmcnLCd3aW4yLnBuZycsJ3dpbjMucG5nJywnd2luNC5wbmcnLCd3aW41LnBuZycsJ3dpbjYucG5nJywnd2luNy5wbmcnLCd3aW44LnBuZycsJ3dpbjkucG5nJyxcbiAgICAnd2luMTAucG5nJywnd2luMTEucG5nJywnd2luMTIucG5nJywnd2luMTMucG5nJywnd2luMTQucG5nJywnd2luMTUucG5nJ1xuXTtcblxudmFyIHNsb3RzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNsb3RzJyk7XG52YXIgY29scyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jb2wnKTtcblxuZm9yKHZhciBpIGluIGNvbHMpIHtcbiAgICBpZiAoIWNvbHMuaGFzT3duUHJvcGVydHkoaSkpXG4gICAgICAgIGNvbnRpbnVlO1xuICAgIHZhciBjb2wgPSBjb2xzW2ldO1xuICAgIHZhciBzdHIgPSAnJztcbiAgICB2YXIgZmlyc3RUaHJlZSA9ICcnO1xuICAgIGZvcih2YXIgeCA9IDA7IHggPCAzMDsgeCsrKSB7XG4gICAgICAgIHZhciBwYXJ0ID0gJzxkaXYgY2xhc3M9XCJpY29uLXdyYXBcIj48aW1nIGNsYXNzPVwiaWNvblwiIHNyYz1cImltZy9zbG90cy8nK2ljb25zW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSppY29ucy5sZW5ndGgpXSsnXCI+PC9kaXY+JztcbiAgICAgICAgLy8gdmFyIHBhcnQgPSAnPGltZyBjbGFzcz1cImljb25cIiBzcmM9XCJpbWcvc2xvdHMvJytpY29uc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqaWNvbnMubGVuZ3RoKV0rJ1wiPic7XG4gICAgICAgIHN0ciArPSBwYXJ0XG4gICAgICAgIGlmICh4IDwgMykgZmlyc3RUaHJlZSArPSBwYXJ0O1xuICAgIH1cbiAgICBjb2wuaW5uZXJIVE1MID0gIHN0citmaXJzdFRocmVlO1xufVxuXG4oZnVuY3Rpb24gc3RhcnRTbG90c0ltZygpe1xuXG4gICAgY29uc3Qgc3RhcnRDb2wxID0gWyd3aW4xLnBuZycsICd3aW4xMi5wbmcnLCAnd2luMTMucG5nJ107XG4gICAgY29uc3Qgc3RhcnRDb2wyID0gWyd3aW43LnBuZycsICd3aW44LnBuZycsICd3aW4xMC5wbmcnXTtcbiAgICBjb25zdCBzdGFydENvbDMgPSBbJ3dpbjExLnBuZycsICd3aW4xNC5wbmcnLCAnd2luMTIucG5nJ107XG4gICAgY29uc3Qgc3RhcnRDb2w0ID0gWyd3aW41LnBuZycsICd3aW4xLnBuZycsICd3aW4yLnBuZyddO1xuICAgIGNvbnN0IHN0YXJ0Q29sNSA9IFsnd2luNS5wbmcnLCAnd2luNi5wbmcnLCAnd2luMTMucG5nJ107XG5cblxuXG5cbiAgICBjb25zdCBjb2xzSW1nMSA9IEFycmF5LmZyb20oY29sc1swXS5xdWVyeVNlbGVjdG9yQWxsKCdpbWcnKSlcbiAgICBjb2xzSW1nMVszMl0uc2V0QXR0cmlidXRlKCdzcmMnLCAnaW1nL3Nsb3RzLycrIHN0YXJ0Q29sMVswXSlcbiAgICBjb2xzSW1nMVszMV0uc2V0QXR0cmlidXRlKCdzcmMnLCAnaW1nL3Nsb3RzLycrIHN0YXJ0Q29sMVsxXSlcbiAgICBjb2xzSW1nMVszMF0uc2V0QXR0cmlidXRlKCdzcmMnLCAnaW1nL3Nsb3RzLycrIHN0YXJ0Q29sMVsyXSlcblxuXG4gICAgY29uc3QgY29sc0ltZzIgPSBBcnJheS5mcm9tKGNvbHNbMV0ucXVlcnlTZWxlY3RvckFsbCgnaW1nJykpXG4gICAgY29sc0ltZzJbMzJdLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ltZy9zbG90cy8nKyBzdGFydENvbDJbMF0pXG4gICAgY29sc0ltZzJbMzFdLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ltZy9zbG90cy8nKyBzdGFydENvbDJbMV0pXG4gICAgY29sc0ltZzJbMzBdLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ltZy9zbG90cy8nKyBzdGFydENvbDJbMl0pXG5cbiAgICBjb25zdCBjb2xzSW1nMyA9IEFycmF5LmZyb20oY29sc1syXS5xdWVyeVNlbGVjdG9yQWxsKCdpbWcnKSlcbiAgICBjb2xzSW1nM1szMl0uc2V0QXR0cmlidXRlKCdzcmMnLCAnaW1nL3Nsb3RzLycrIHN0YXJ0Q29sM1swXSlcbiAgICBjb2xzSW1nM1szMV0uc2V0QXR0cmlidXRlKCdzcmMnLCAnaW1nL3Nsb3RzLycrIHN0YXJ0Q29sM1sxXSlcbiAgICBjb2xzSW1nM1szMF0uc2V0QXR0cmlidXRlKCdzcmMnLCAnaW1nL3Nsb3RzLycrIHN0YXJ0Q29sM1syXSlcblxuICAgIGNvbnN0IGNvbHNJbWc0ID0gQXJyYXkuZnJvbShjb2xzWzNdLnF1ZXJ5U2VsZWN0b3JBbGwoJ2ltZycpKVxuICAgIGNvbHNJbWc0WzMyXS5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpbWcvc2xvdHMvJysgc3RhcnRDb2w0WzBdKVxuICAgIGNvbHNJbWc0WzMxXS5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpbWcvc2xvdHMvJysgc3RhcnRDb2w0WzFdKVxuICAgIGNvbHNJbWc0WzMwXS5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpbWcvc2xvdHMvJysgc3RhcnRDb2w0WzJdKVxuXG4gICAgY29uc3QgY29sc0ltZzUgPSBBcnJheS5mcm9tKGNvbHNbNF0ucXVlcnlTZWxlY3RvckFsbCgnaW1nJykpXG4gICAgY29sc0ltZzVbMzJdLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ltZy9zbG90cy8nKyBzdGFydENvbDVbMF0pXG4gICAgY29sc0ltZzVbMzFdLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ltZy9zbG90cy8nKyBzdGFydENvbDVbMV0pXG4gICAgY29sc0ltZzVbMzBdLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ltZy9zbG90cy8nKyBzdGFydENvbDVbMl0pXG59KSgpXG5cbmNvbnN0IHdpbjFDb2wxID0gWyd3aW4xLnBuZycsICd3aW41LnBuZycsICd3aW4xMy5wbmcnXTtcbmNvbnN0IHdpbjFDb2wyID0gWyd3aW43LnBuZycsICd3aW41LnBuZycsICd3aW4xMC5wbmcnXTtcbmNvbnN0IHdpbjFDb2wzID0gWyd3aW4xMS5wbmcnLCAnd2luNS5wbmcnLCAnd2luMTIucG5nJ107XG5jb25zdCB3aW4xQ29sNCA9IFsnd2luMTEucG5nJywgJ3dpbjUucG5nJywgJ3dpbjIucG5nJ107XG5jb25zdCB3aW4xQ29sNSA9IFsnd2luMi5wbmcnLCAnd2luNS5wbmcnLCAnd2luMTMucG5nJ107XG5cblxuXG5jb25zdCBjb2xzSW1nMSA9IEFycmF5LmZyb20oY29sc1swXS5xdWVyeVNlbGVjdG9yQWxsKCdpbWcnKSlcbmNvbnN0IGNvbHNJbWcyID0gQXJyYXkuZnJvbShjb2xzWzFdLnF1ZXJ5U2VsZWN0b3JBbGwoJ2ltZycpKVxuY29uc3QgY29sc0ltZzMgPSBBcnJheS5mcm9tKGNvbHNbMl0ucXVlcnlTZWxlY3RvckFsbCgnaW1nJykpXG5jb25zdCBjb2xzSW1nNCA9IEFycmF5LmZyb20oY29sc1szXS5xdWVyeVNlbGVjdG9yQWxsKCdpbWcnKSlcbmNvbnN0IGNvbHNJbWc1ID0gQXJyYXkuZnJvbShjb2xzWzRdLnF1ZXJ5U2VsZWN0b3JBbGwoJ2ltZycpKVxuXG5sZXQgdHJpZXMgPSAwO1xuZnVuY3Rpb24gc3BpbigpIHtcbiAgICAvL3NvdW5kc1xuXG4gICAgc2xvdHMuY2xhc3NMaXN0LnRvZ2dsZSgnc3Bpbm5pbmcnLCB0cnVlKTtcbiAgICAvL9Ck0LjQutGBINC00LvRjyDQodCw0YTQsNGA0LgsINC60L7RgtC+0YDRi9C5INGA0LXRiNC40Lsg0LPQu9C+0YLQsNGC0Ywg0L/QvtGB0LvQtdC00L3QuNC1INC60LDRgNGC0LjQvdC60Lgg0L/RgNC4INC/0YDQvtC60YDRg9GC0LrQtVxuICAgIGlmICh0cmllcyA9PT0gMCl7XG4gICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY29uc3QgY29scyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jb2wnKTtcbiAgICAgICAgICAgIHRyaWVzKys7XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGNvbHNJbWcxWzMyXSlcbiAgICAgICAgICAgIGNvbHNJbWcxWzMyXS5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpbWcvc2xvdHMvJysgd2luMUNvbDFbMl0pXG4gICAgICAgICAgICBjb2xzSW1nMVszMV0uc2V0QXR0cmlidXRlKCdzcmMnLCAnaW1nL3Nsb3RzLycrIHdpbjFDb2wxWzFdKVxuICAgICAgICAgICAgY29sc0ltZzFbMzBdLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ltZy9zbG90cy8nKyB3aW4xQ29sMVswXSlcbiAgICAgICAgICAgIGNvbHNJbWcxWzBdLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ltZy9zbG90cy8nKyB3aW4xQ29sMVswXSlcbiAgICAgICAgICAgIGNvbHNJbWcxWzFdLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ltZy9zbG90cy8nKyB3aW4xQ29sMVsxXSlcbiAgICAgICAgICAgIGNvbHNJbWcxWzJdLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ltZy9zbG90cy8nKyB3aW4xQ29sMVsyXSlcblxuICAgICAgICAgICAgY29sc0ltZzJbMzJdLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ltZy9zbG90cy8nKyB3aW4xQ29sMlsyXSlcbiAgICAgICAgICAgIGNvbHNJbWcyWzMxXS5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpbWcvc2xvdHMvJysgd2luMUNvbDJbMV0pXG4gICAgICAgICAgICBjb2xzSW1nMlszMF0uc2V0QXR0cmlidXRlKCdzcmMnLCAnaW1nL3Nsb3RzLycrIHdpbjFDb2wyWzBdKVxuICAgICAgICAgICAgY29sc0ltZzJbMF0uc2V0QXR0cmlidXRlKCdzcmMnLCAnaW1nL3Nsb3RzLycrIHdpbjFDb2wyWzBdKVxuICAgICAgICAgICAgY29sc0ltZzJbMV0uc2V0QXR0cmlidXRlKCdzcmMnLCAnaW1nL3Nsb3RzLycrIHdpbjFDb2wyWzFdKVxuICAgICAgICAgICAgY29sc0ltZzJbMl0uc2V0QXR0cmlidXRlKCdzcmMnLCAnaW1nL3Nsb3RzLycrIHdpbjFDb2wyWzJdKVxuXG4gICAgICAgICAgICBjb2xzSW1nM1szMl0uc2V0QXR0cmlidXRlKCdzcmMnLCAnaW1nL3Nsb3RzLycrIHdpbjFDb2wzWzJdKVxuICAgICAgICAgICAgY29sc0ltZzNbMzFdLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ltZy9zbG90cy8nKyB3aW4xQ29sM1sxXSlcbiAgICAgICAgICAgIGNvbHNJbWczWzMwXS5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpbWcvc2xvdHMvJysgd2luMUNvbDNbMF0pXG4gICAgICAgICAgICBjb2xzSW1nM1swXS5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpbWcvc2xvdHMvJysgd2luMUNvbDNbMF0pXG4gICAgICAgICAgICBjb2xzSW1nM1sxXS5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpbWcvc2xvdHMvJysgd2luMUNvbDNbMV0pXG4gICAgICAgICAgICBjb2xzSW1nM1syXS5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpbWcvc2xvdHMvJysgd2luMUNvbDNbMl0pXG5cbiAgICAgICAgICAgIGNvbHNJbWc0WzMyXS5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpbWcvc2xvdHMvJysgd2luMUNvbDRbMl0pXG4gICAgICAgICAgICBjb2xzSW1nNFszMV0uc2V0QXR0cmlidXRlKCdzcmMnLCAnaW1nL3Nsb3RzLycrIHdpbjFDb2w0WzFdKVxuICAgICAgICAgICAgY29sc0ltZzRbMzBdLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ltZy9zbG90cy8nKyB3aW4xQ29sNFswXSlcbiAgICAgICAgICAgIGNvbHNJbWc0WzBdLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ltZy9zbG90cy8nKyB3aW4xQ29sNFswXSlcbiAgICAgICAgICAgIGNvbHNJbWc0WzFdLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ltZy9zbG90cy8nKyB3aW4xQ29sNFsxXSlcbiAgICAgICAgICAgIGNvbHNJbWc0WzJdLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ltZy9zbG90cy8nKyB3aW4xQ29sNFsyXSlcblxuICAgICAgICAgICAgY29sc0ltZzVbMzJdLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ltZy9zbG90cy8nKyB3aW4xQ29sNVsyXSlcbiAgICAgICAgICAgIGNvbHNJbWc1WzMxXS5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpbWcvc2xvdHMvJysgd2luMUNvbDVbMV0pXG4gICAgICAgICAgICBjb2xzSW1nNVszMF0uc2V0QXR0cmlidXRlKCdzcmMnLCAnaW1nL3Nsb3RzLycrIHdpbjFDb2w1WzBdKVxuICAgICAgICAgICAgY29sc0ltZzVbMF0uc2V0QXR0cmlidXRlKCdzcmMnLCAnaW1nL3Nsb3RzLycrIHdpbjFDb2w1WzBdKVxuICAgICAgICAgICAgY29sc0ltZzVbMV0uc2V0QXR0cmlidXRlKCdzcmMnLCAnaW1nL3Nsb3RzLycrIHdpbjFDb2w1WzFdKVxuICAgICAgICAgICAgY29sc0ltZzVbMl0uc2V0QXR0cmlidXRlKCdzcmMnLCAnaW1nL3Nsb3RzLycrIHdpbjFDb2w1WzJdKVxuXG4gICAgICAgIH0sIDE1MDApO1xuXG4gICAgfVxuXG4gICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIHNsb3RzLmNsYXNzTGlzdC50b2dnbGUoJ3NwaW5uaW5nJywgZmFsc2UpO1xuICAgICAgICBpZiAodHJpZXMgPT09IDEpIHtcbiAgICAgICAgICAgIHNsb3RzV2luZG93LmNsYXNzTGlzdC5hZGQoXCJhZnRlclNwaW5cIilcbiAgICAgICAgICAgIGNvbHNJbWcxWzMxXS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ193aW5BbmltJylcbiAgICAgICAgICAgIGNvbHNJbWcyWzMxXS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ193aW5BbmltJylcbiAgICAgICAgICAgIGNvbHNJbWczWzMxXS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ193aW5BbmltJylcbiAgICAgICAgICAgIGNvbHNJbWc0WzMxXS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ193aW5BbmltJylcbiAgICAgICAgICAgIGNvbHNJbWc1WzMxXS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ193aW5BbmltJylcbiAgICAgICAgICAgIHdpbk91dGVyLmNsYXNzTGlzdC5hZGQoJ193aW5PbmUnKVxuICAgICAgICB9XG4gICAgfSwgMzUwMCk7XG59XG5cbmxldCB0cmllc0NvdW50ZXIgPSAwXG5cbnBsYXlCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgaWYgKHRyaWVzQ291bnRlciA9PT0gMCkge1xuICAgICAgICBydW5GaXJzdFJvdGF0aW9uKClcbiAgICB9XG59KVxuXG5mdW5jdGlvbiBydW5GaXJzdFJvdGF0aW9uKCkge1xuICAgIHBsYXlCdG4uY2xhc3NMaXN0LnJlbW92ZSgncHVsc2UtYnRuJylcbiAgICBwbGF5QnRuLnN0eWxlLmN1cnNvciA9ICdkZWZhdWx0J1xuICAgIHdyYXBwZXIuc3R5bGUucG9pbnRlckV2ZW50cyA9ICdub25lJ1xuICAgIHNwaW4oKVxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBkb0FmdGVyRmlyc3RSb3RhdGlvbigpXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT57XG4gICAgICAgICAgICBwb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19wZXJzLWJ1bGJcIikuY2xhc3NMaXN0LmFkZChcImJ1bGItZmFkZUluXCIpXG4gICAgICAgIH0sIDMwMClcbiAgICB9LCA0MDAwKVxuICAgIHRyaWVzQ291bnRlcisrXG59XG5cbmZ1bmN0aW9uIGRpc3BsYXlQb3B1cChwb3B1cCkge1xuICAgIG92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZSgnX29wYWNpdHktb3ZlcmxheScpXG4gICAgcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZScpXG59XG5cbmZ1bmN0aW9uIGRvQWZ0ZXJGaXJzdFJvdGF0aW9uKCkge1xuICAgIGRpc3BsYXlQb3B1cChwb3B1cClcbiAgICAvLyB3cmFwcGVyLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnYXV0bydcbiAgICBvdmVyZmxvdy5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hbGwtbGlua1wiKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiXG4gICAgd3JhcHBlci5zdHlsZS5wb2ludGVyRXZlbnRzID0gXCJub25lXCJcblxufVxuXG5jb2xzLmZvckVhY2goaXRlbSA9PiB7XG4gICAgaWYgKC9pUGhvbmV8aVBhZHxpUG9kL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSkge1xuICAgICAgICAvLyDQutC+0LQg0LTQu9GPINC80L7QsdC40LvRjNC90YvRhSDRg9GB0YLRgNC+0LnRgdGC0LJcbiAgICAgICAgaXRlbS5jbGFzc0xpc3QuYWRkKCdfaW9zJylcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyDQutC+0LQg0LTQu9GPINC+0LHRi9GH0L3Ri9GFINGD0YHRgtGA0L7QudGB0YLQslxuICAgICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ19pb3MnKVxuICAgIH1cblxufSk7XG5cbi8vIFREUyBzY3JpcHRcblxuKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdXJsID0gbmV3IFVSTCh3aW5kb3cubG9jYXRpb24uaHJlZik7XG4gICAgdmFyIHBhcmFtcyA9IFsnbCcsICd1dG1fc291cmNlJywgJ3V0bV9tZWRpdW0nLCAndXRtX2NhbXBhaWduJywgJ3V0bV90ZXJtJywgJ3V0bV9jb250ZW50JywgJ3BhcmFtMScsICdwYXJhbTInLCAncGFyYW0zJywgJ3BhcmFtNCcsICdjcmVhdGl2ZV90eXBlJywgJ2NyZWF0aXZlX2lkJ107XG4gICAgdmFyIGxpbmtQYXJhbXMgPSBbJ2FmZmlkJywgJ2NwYWlkJ107IC8vINC40YnQtdC8INCyIHVybCByZWRpcmVjdFVybCDQsiB1cmw6XG5cbiAgICBpZiAodXJsLnNlYXJjaFBhcmFtcy5oYXMoJ3JlZGlyZWN0VXJsJykpIHtcbiAgICAgICAgdmFyIHJlZGlyZWN0VXJsID0gbmV3IFVSTCh1cmwuc2VhcmNoUGFyYW1zLmdldCgncmVkaXJlY3RVcmwnKSk7XG5cbiAgICAgICAgaWYgKHJlZGlyZWN0VXJsLmhyZWYubWF0Y2goL1xcLy9nKS5sZW5ndGggPT09IDQgJiYgcmVkaXJlY3RVcmwuc2VhcmNoUGFyYW1zLmdldCgnbCcpKSB7XG4gICAgICAgICAgICAvL9C10YHQu9C4INGB0YHRi9C70LrQsCDQsiDRgdGB0YvQu9C60LAgcmVkaXJlY3RVcmwg0LrQvtGA0YDQtdC60YLQvdCw0Y9cbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdyZWRpcmVjdFVybCcsIHJlZGlyZWN0VXJsLmhyZWYpOyAvLyDRg9C60LDQt9GL0LLQsNC10Lwg0YLQvtGH0LrQvtC5INCy0YXQvtC00LAg0LTQvtC80LXQvSDRgSDQv9GA0L7RgtC+0LrQvtC70L7QvCDQuNC3IHJlZGlyZWN0VXJsXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwYXJhbXMuZm9yRWFjaChmdW5jdGlvbiAocGFyYW0pIHtcbiAgICAgICAgaWYgKHVybC5zZWFyY2hQYXJhbXMuaGFzKHBhcmFtKSkgbG9jYWxTdG9yYWdlLnNldEl0ZW0ocGFyYW0sIHVybC5zZWFyY2hQYXJhbXMuZ2V0KHBhcmFtKSk7XG4gICAgfSk7XG5cbiAgICBsaW5rUGFyYW1zLmZvckVhY2goZnVuY3Rpb24gKGxpbmtQYXJhbSkge1xuICAgICAgICBpZiAodXJsLnNlYXJjaFBhcmFtcy5oYXMobGlua1BhcmFtKSkgbG9jYWxTdG9yYWdlLnNldEl0ZW0obGlua1BhcmFtLCB1cmwuc2VhcmNoUGFyYW1zLmdldChsaW5rUGFyYW0pKTtcbiAgICB9KTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciBsaW5rLFxuICAgICAgICAgICAgcGFyZW50ID0gZS50YXJnZXQuY2xvc2VzdCgnYScpO1xuXG4gICAgICAgIGlmIChwYXJlbnQuZ2V0QXR0cmlidXRlKCdocmVmJykgIT09ICdodHRwczovL3Rkcy5mYXZiZXQucGFydG5lcnMnKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocGFyZW50KSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB2YXIgYWZmaWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYWZmaWQnKTtcbiAgICAgICAgICAgIHZhciBjcGFpZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjcGFpZCcpO1xuXG4gICAgICAgICAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJyZWRpcmVjdFVybFwiKSkge1xuICAgICAgICAgICAgICAgIGxpbmsgPSBuZXcgVVJMKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwicmVkaXJlY3RVcmxcIikpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsaW5rID0gbmV3IFVSTChwYXJlbnQuaHJlZik7XG4gICAgICAgICAgICAgICAgaWYgKGFmZmlkICYmIGNwYWlkKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpbmsucGF0aG5hbWUgPSAnLycgKyBhZmZpZCArICcvJyArIGNwYWlkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcmFtcy5mb3JFYWNoKGZ1bmN0aW9uIChwYXJhbSkge1xuICAgICAgICAgICAgICAgIGlmICh1cmwuc2VhcmNoUGFyYW1zLmhhcyhwYXJhbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgbGluay5zZWFyY2hQYXJhbXMuc2V0KHBhcmFtLCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShwYXJhbSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZG9jdW1lbnQubG9jYXRpb24uaHJlZiA9IGxpbms7XG4gICAgICAgIH1cbiAgICB9KTtcbn0pKCk7XG5cblxuIl19
